<!-- Created by Tom Zacharski, 2017 -->
<!-- https://github.com/tzacharski/singapore_map -->

<html>
	<script src="https://d3js.org/d3.v3.min.js"></script>
	<script>

	STROKE_WIDTH = '4';

	FADEOUT_DELAY = 0;
	FADEOUT_TIME = 1500;

	DURATION = 2500;
	DELAY = FADEOUT_DELAY + FADEOUT_TIME + 1000;

	FADEIN_DELAY = DELAY + DURATION + 1000;
	FADEIN_TIME = 2000;

	/* 
	   The two functions below have been authored by Mike Bostock
	   https://gist.github.com/mbostock/3916621
	*/

	function transition(path, d0, d1) {
	  path.transition()
	      .duration(DURATION)
	      .delay(DELAY)
	      .ease("linear")
	      .attrTween("d", pathTween(d0, 4))
	}
	function pathTween(d1, precision) {
	  return function() {
	    var path0 = this,
	        path1 = path0.cloneNode(),
	        n0 = path0.getTotalLength(),
	        n1 = (path1.setAttribute("d", d1), path1).getTotalLength();
	    // Uniform sampling of distance based on specified precision.
	    var distances = [0], i = 0, dt = precision / Math.max(n0, n1);
	    while ((i += dt) < 1) distances.push(i);
	    distances.push(1);
	    // Compute point-interpolators at each distance.
	    var points = distances.map(function(t) {
	      var p0 = path0.getPointAtLength(t * n0),
	          p1 = path1.getPointAtLength(t * n1);
	      return d3.interpolate([p0.x, p0.y], [p1.x, p1.y]);
	    });
	    return function(t) {
	      return t < 1 ? "M" + points.map(function(p) { return p(t); }).join("L") : d1;
	    };
	  };
	}

	function Start() {
		//Artificial map coordinates - below recreates the official MRT map
		coordinates_red = "M950,833 L928,811 L898,781 L950,729 L968,711 L982,696 L915,629 L884,598 L884,577 L906,555 L926,535 L946,515 L958,501 L958,477 L958,442 L958,412 L958,382 L958,352 L958,327 L916,327 L865,327 L802,327 L737,327 L677,327 L635,327 L635,349 L635,400 L635,455 L635,507 L635,562";
		coordinates_green = "M505,413 L505,439 L505,463 L505,488 L505,513 L505,537 L505,562 L526,562 L562,562 L595,562 L635,562 L678,562 L690,574 L708,592 L731,615 L747,631 L766,650 L786,670 L804,688 L830,714 L867,751 L894,778 L945,727 L963,709 L1016,656 L1037,635 L1055,617 L1075,597 L1089,583 L1119,583 L1151,583 L1182,583 L1214,583 L1244,583 L1261,583 L1261,559 L1261,521 L1261,483";
		coordinates_green2 = "M1244,583 L1244,611 L1274,611 L1310,611";
		coordinates_yellow = "M928,811 L996,743 L1030,708 L1055,683 L1081,657 L1105,633 L1119,619 L1119,606 L1119,583 L1119,543 L1094,518 L1069,493 L1053,477 L1026,477 L993,477 L958,477 L895,477 L868,477 L851,494 L821,524 L786,559 L759,586 L731,614 L707,638 L684,661 L674,671 L674,692 L674,722 L674,747 L680,753 L707,780 L734,807";
		coordinates_yellow2 = "M926,628 L956,658 L995,697 L1018,720";
		coordinates_purple = "M734,807 L829,712 L848,693 L879,662 L914,627 L951,590 L971,570 L990,551 L1010,531 L1026,515 L1026,498 L1026,476 L1026,460 L1038,448 L1054,432 L1071,415 L1090,396 L1142,344";
		coordinates_blue = "M848,693 L866,711 L927,772 L944,789 L991,742 L1027,706 L1046,687 L1015,656 L980,621 L949,590 L915,556 L883,524 L870,524 L821,524 L787,524 L766,503 L747,484 L747,463 L747,443 L747,425 L747,400";
		coordinates_lrt1 = "M635,400 L660,400 L679,400 L698,400 L719,400 L747,400 L770,400 L777,393 L786,384 L796,384 L819,384 L830,384 L830,401 L830,417 L819,417 L796,417 L786,417 L777,408 L770,400";
		coordinates_lrt11 = "M728,370 L728,400";
		coordinates_lrt2 = "M1142,344 L1127,327 L1127,305 L1113,291 L1100,278 L1095,283 L1084,294 L1078,300 L1088,310 L1097,319 L1105,327 L1116,327 L1127,327";
		coordinates_lrt3 = "M1090,396 L1072,376 L1072,365 L1072,354 L1068,350 L1056,338 L1046,328 L1037,336 L1029,344 L1024,349 L1031,356 L1043,368 L1051,376 L1064,376 L1072,376";
		coordinates_lrt4 = "M1142,344 L1161,362 L1161,373 L1161,382 L1166,387 L1179,400 L1187,407 L1200,394 L1208,385 L1201,378 L1188,365 L1185,362 L1171,362 L1161,362";
		coordinates_lrt5 = "M1090,396 L1105,411 L1105,431 L1109,435 L1123,449 L1131,457 L1139,449 L1142,446 L1152,436 L1143,427 L1130,414 L1127,411 L1105,411";

		//Geographic coordinate - traced pixels of the JohoMaps map
		transition_red = "M978,793 L972,788 L966,782 L961,776 L948,743 L947,740 L947,733 L947,699 L947,692 L943,688 L939,685 L933,683 L927,681 L900,675 L892,674 L886,671 L881,668 L877,666 L874,662 L874,655 L875,650 L876,645 L880,639 L885,632 L890,629 L895,625 L904,618 L909,613 L915,606 L919,600 L924,590 L930,580 L933,574 L936,566 L937,560 L937,555 L937,551 L935,545 L933,534 L931,526 L930,520 L930,512 L931,500 L931,492 L933,487 L935,479 L938,472 L940,465 L944,457 L947,450 L950,443 L952,437 L951,428 L948,421 L946,414 L942,404 L929,363 L928,356 L925,350 L920,342 L915,334 L909,327 L903,320 L898,313 L889,306 L883,300 L876,295 L870,291 L868,287 L866,284 L867,279 L868,271 L869,260 L870,249 L872,240 L873,234 L874,230 L876,225 L878,216 L882,199 L883,194 L883,188 L882,184 L880,176 L877,163 L874,153 L871,143 L866,130 L863,126 L859,120 L854,116 L850,113 L845,111 L839,110 L833,109 L826,109 L817,109 L809,110 L802,111 L799,112 L793,115 L785,119 L779,123 L771,127 L763,130 L756,133 L750,135 L741,136 L732,137 L719,141 L710,144 L697,147 L650,166 L629,173 L624,175 L620,178 L615,182 L598,195 L590,198 L583,201 L578,203 L573,205 L569,206 L566,208 L563,211 L561,215 L557,222 L555,235 L553,256 L551,269 L549,283 L546,296 L544,309 L541,319 L539,328 L536,339 L534,345 L533,351 L531,357 L529,366 L528,373 L528,379 L529,384 L531,388 L535,393 L539,397 L542,401 L546,404 L552,410 L555,413 L558,419 L561,426 L564,434 L565,440 L566,446 L567,458 L567,465 L566,472 L565,475 L563,478 L561,483 L555,492 L548,502 L538,516 L533,523 L528,528 L524,534 L523,538 L518,544";
		transition_green = "M128,504 L121,529 L120,535 L120,539 L122,542 L125,546 L136,557 L158,578 L172,593 L182,603 L191,612 L199,610 L219,591 L227,584 L241,572 L254,562 L262,558 L270,556 L278,555 L286,554 L294,554 L307,556 L314,556 L317,554 L320,550 L322,548 L324,545 L326,541 L329,538 L333,535 L338,533 L343,532 L347,531 L355,531 L373,530 L382,529 L393,527 L444,509 L455,508 L465,509 L473,511 L480,514 L487,517 L501,529 L513,539 L523,549 L542,559 L555,567 L566,571 L579,579 L587,586 L596,597 L602,607 L611,621 L618,628 L625,631 L635,633 L642,634 L650,635 L668,640 L681,644 L693,650 L705,655 L721,663 L740,675 L751,684 L759,692 L767,700 L778,709 L784,713 L791,715 L798,718 L809,720 L852,731 L893,742 L895,744 L898,748 L901,753 L905,759 L908,763 L911,765 L914,768 L922,771 L926,770 L929,768 L933,764 L937,760 L940,756 L944,749 L948,744 L951,738 L952,730 L952,723 L952,716 L953,709 L953,702 L954,693 L955,687 L958,681 L962,674 L966,665 L971,659 L976,655 L982,651 L985,648 L989,645 L993,642 L1002,635 L1006,634 L1013,631 L1019,629 L1025,626 L1073,611 L1100,605 L1146,596 L1185,588 L1252,578 L1285,572 L1292,571 L1298,568 L1307,566 L1315,561 L1325,557 L1332,554 L1340,548 L1344,543 L1349,533 L1349,529 L1348,524 L1347,521 L1346,517 L1345,514 L1342,509 L1340,504 L1336,499 L1330,493 L1325,490 L1323,487 L1319,483 L1309,472 L1305,467 L1304,464 L1302,460 L1302,457 L1303,453 L1304,448 L1306,443 L1308,439 L1310,433 L1323,397";
		transition_green2 = "M1311,564 L1313,564 L1316,564 L1317,564 L1318,564 L1322,564 L1325,564 L1327,562 L1330,561 L1334,560 L1336,560 L1341,560 L1345,560 L1349,561 L1351,561 L1356,561 L1358,560 L1362,558 L1365,555 L1369,552 L1371,549 L1374,546 L1377,542 L1381,538 L1384,534 L1388,530 L1395,524 L1404,516 L1411,508 L1418,501 L1426,492 ";
		transition_yellow = "M962,777 L965,775 L969,773 L971,771 L974,769 L977,767 L979,764 L981,762 L984,759 L986,755 L988,751 L990,748 L991,747 L992,745 L993,742 L993,739 L993,736 L993,733 L993,727 L993,721 L994,714 L994,708 L995,702 L995,696 L995,690 L996,688 L997,683 L999,679 L1001,674 L1003,673 L1007,671 L1010,670 L1015,670 L1020,671 L1025,671 L1029,671 L1034,670 L1037,668 L1044,666 L1049,664 L1056,661 L1061,659 L1067,657 L1071,655 L1077,653 L1083,651 L1088,648 L1091,647 L1096,643 L1098,638 L1099,636 L1101,632 L1101,626 L1101,621 L1100,616 L1100,612 L1100,607 L1099,601 L1099,596 L1099,590 L1097,584 L1096,579 L1096,576 L1095,571 L1092,564 L1090,556 L1088,552 L1087,545 L1085,540 L1082,532 L1079,527 L1076,521 L1073,519 L1069,517 L1066,517 L1062,515 L1058,513 L1055,512 L1049,507 L1045,503 L1043,500 L1040,496 L1037,494 L1032,491 L1029,489 L1024,487 L1020,484 L1016,483 L1010,482 L1005,481 L998,481 L993,482 L987,483 L980,484 L974,487 L969,487 L965,486 L959,485 L955,484 L949,482 L943,481 L938,480 L935,479 L927,479 L923,479 L919,480 L913,481 L909,483 L906,486 L904,489 L903,494 L901,500 L901,507 L901,512 L901,517 L901,523 L900,528 L899,533 L897,537 L894,543 L892,546 L889,547 L886,547 L881,548 L875,548 L869,548 L832,547 L827,547 L822,547 L818,548 L815,550 L813,552 L811,556 L811,559 L811,563 L813,583 L813,586 L812,588 L810,590 L807,592 L804,594 L799,597 L787,606 L781,610 L779,612 L776,614 L774,618 L771,621 L769,624 L765,626 L763,627 L759,628 L755,630 L751,631 L747,633 L742,635 L736,638 L732,640 L728,642 L725,645 L722,649 L720,652 L717,656 L714,660 L711,664 L709,667 L706,670 L704,674 L702,677 L700,681 L698,683 L696,688 L694,692 L691,698 L683,716 L679,722 L678,725 L679,730 L680,734 L682,738 L684,742 L685,745 L688,749 L691,753 L694,755 L700,758 L707,761 L713,763 L719,766 L728,769 L736,772 L742,774 L749,777 L757,779 L763,779 L769,780 L778,782 L784,782 L790,784 L796,786 L803,788 L810,793 L819,798 L825,802 L831,806 L836,809 L839,812";
		transition_yellow2 = "M927,674 L931,674 L934,674 L938,675 L941,676 L945,677 L947,678 L951,680 L954,682 L957,684 L960,687 L963,688 L965,690 L968,692 L971,695 L974,696 L977,697 L980,698 L983,698 L986,698 L988,697 L990,695 L990,693 L992,691 L994,689 L995,688 L995,686";
		transition_purple = "M838,812 L895,753 L905,744 L910,739 L912,735 L914,732 L915,729 L916,725 L916,721 L914,717 L913,714 L912,712 L912,709 L914,706 L917,702 L921,694 L924,689 L927,684 L931,677 L934,671 L935,669 L939,663 L945,652 L953,636 L956,631 L966,617 L986,593 L996,581 L1001,574 L1007,566 L1009,562 L1010,560 L1011,557 L1011,553 L1012,550 L1014,543 L1016,534 L1016,530 L1016,521 L1016,514 L1017,505 L1018,500 L1020,496 L1024,491 L1029,486 L1036,478 L1066,450 L1075,442 L1092,424 L1099,418 L1104,412 L1107,407 L1110,401 L1113,397 L1114,393 L1115,390 L1116,384 L1116,378 L1116,372 L1117,363 L1117,360 L1117,351 L1117,344 L1119,278";
		transition_blue = "M915,727 L917,730 L920,733 L926,740 L931,744 L934,748 L939,752 L943,757 L947,760 L951,762 L956,763 L963,765 L968,764 L973,762 L977,759 L982,756 L985,751 L987,746 L989,741 L990,735 L991,731 L991,723 L991,717 L991,709 L992,701 L993,696 L993,691 L993,688 L991,685 L989,682 L984,679 L979,674 L973,669 L967,666 L961,659 L955,654 L952,651 L948,648 L942,643 L937,640 L933,638 L926,635 L916,632 L896,625 L894,622 L891,619 L890,616 L887,613 L884,610 L879,607 L872,605 L866,603 L857,600 L850,598 L840,595 L831,593 L824,591 L819,589 L815,589 L810,590 L805,590 L800,590 L797,590 L793,589 L788,587 L785,584 L781,582 L777,578 L773,575 L769,571 L764,567 L757,564 L750,562 L744,560 L737,558 L707,546 L690,539 L672,530 L665,526 L663,525 L661,523 L661,520 L660,518 L660,515 L660,510 L660,506 L658,503 L656,501 L653,497 L647,492 L642,489 L639,484 L636,480 L634,473 L632,466 L631,458 L631,450 L630,445 L629,439 L628,433 L627,429 L626,424 L625,420 L622,418 L619,415 L617,411 L615,407 L614,402 L613,395 L612,389 L610,383 L608,377 L606,371 L603,362";
		transition_lrt1 = "M533,347 L536,348 L540,349 L545,351 L550,352 L556,354 L560,355 L564,357 L569,358 L575,359 L581,360 L586,360 L593,361 L598,361 L603,362 L606,362 L609,360 L610,357 L610,354 L613,352 L616,350 L619,349 L624,348 L627,348 L631,348 L639,348 L642,350 L646,352 L648,355 L650,359 L650,362 L651,368 L651,373 L649,377 L648,379 L646,382 L646,383 L642,384 L639,384 L637,383 L634,380 L630,377 L627,376 L624,375 L620,375 L616,375 L613,373 L610,371 L610,368 L610,364 L609,362 L607,362 L605,362";
		transition_lrt11 = "M596,351 L600,362";
		transition_lrt2 = "M1118,279 L1118,276 L1120,274 L1121,272 L1123,270 L1124,267 L1125,265 L1125,263 L1126,259 L1127,257 L1127,255 L1126,254 L1123,253 L1122,252 L1120,252 L1119,254 L1117,256 L1116,257 L1114,259 L1111,263 L1109,265 L1109,266 L1108,267 L1106,270 L1105,272 L1104,274 L1103,276 L1103,278 L1102,281 L1102,282 L1103,283 L1105,284 L1108,284 L1110,284 L1112,284 L1113,283 L1114,282 L1114,281 L1115,279 L1116,278";
		transition_lrt3 = "M1114,352 L1114,343 L1114,335 L1114,329 L1114,323 L1113,321 L1111,319 L1106,317 L1095,315 L1075,310 L1062,307 L1057,307 L1053,308 L1050,308 L1048,310 L1047,314 L1046,330 L1046,336 L1047,339 L1048,342 L1051,342 L1054,341 L1057,340 L1063,340 L1066,339 L1069,340 L1071,342 L1078,345 L1086,350 L1094,355 L1100,359 L1104,361 L1107,363 L1109,363 L1111,363 L1113,362 L1113,358 L1114,352";
		transition_lrt4 = "M1123,281 L1123,284 L1123,289 L1124,290 L1128,291 L1135,293 L1140,295 L1145,297 L1152,300 L1158,303 L1161,306 L1164,307 L1167,308 L1171,308 L1175,307 L1179,305 L1181,302 L1182,298 L1182,296 L1179,293 L1177,291 L1173,289 L1169,287 L1165,285 L1159,283 L1150,279 L1141,277 L1134,275 L1128,274 L1126,274 L1124,274 L1123,274 L1122,275 L1122,277 L1123,281";
		transition_lrt5 = "M1121,353 L1121,355 L1121,358 L1121,359 L1121,361 L1121,364 L1123,365 L1125,366 L1128,368 L1131,370 L1133,371 L1137,374 L1140,375 L1143,376 L1145,376 L1146,375 L1148,373 L1150,369 L1151,366 L1153,361 L1155,357 L1157,354 L1158,352 L1160,348 L1160,347 L1160,344 L1160,341 L1159,338 L1156,336 L1151,335 L1146,333 L1142,330 L1139,329 L1134,327 L1131,325 L1127,323 L1124,322 L1122,322 L1121,322 L1121,324 L1121,329 L1120,353 L1121,353";

		//Stations locations on the MRT map
		circles_red = [[950,833],[928,811],[950,729],[968,711],[915,629],[884,598],[884,577],[906,555],[926,535],[946,515],[958,501],[958,477],[958,442],[958,412],[958,382],[958,352],[916,327],[865,327],[802,327],[737,327],[677,327],[635,349],[635,400],[635,455],[635,507],[635,562]];
		circles_green = [[505,413],[505,439],[505,463],[505,488],[505,513],[505,537],[526,562],[562,562],[595,562],[635,562],[690,574],[708,592],[731,615],[747,631],[766,650],[786,670],[804,688],[830,714],[867,751],[945,727],[963,709],[1016,656],[1037,635],[1055,617],[1075,597],[1119,583],[1151,583],[1182,583],[1214,583],[1244,583],[1261,559],[1261,521],[1261,483]];
		circles_green2 = [[1274,611],[1310,611]];
		circles_yellow = [[928,811],[996,743],[1030,708],[1055,683],[1081,657],[1105,633],[1119,606],[1119,583],[1119,543],[1094,518],[1069,493],[1026,477],[993,477],[958,477],[895,477],[851,494],[821,524],[786,559],[759,586],[731,614],[707,638],[684,661],[674,692],[674,722],[674,747],[680,753],[707,780],[734,807]];
		circles_yellow2 = [[956,658],[995,697]];
		circles_purple = [[734,807],[829,712],[848,693],[879,662],[914,627],[951,590],[971,570],[990,551],[1010,531],[1026,498],[1026,476],[1038,448],[1054,432],[1071,415],[1090,396],[1142,344]];
		circles_blue = [[848,693],[866,711],[927,772],[991,742],[1027,706],[1015,656],[980,621],[949,590],[915,556],[883,524],[870,524],[821,524],[787,524],[766,503],[747,484],[747,463],[747,443],[747,425],[747,400]];
		circles_lrt1 = [[660,400],[679,400],[698,400],[719,400],[747,400],[777,393],[796,384],[819,384],[830,401],[819,417],[796,417],[777,408]];
		circles_lrt11 = [[728,370]];
		circles_lrt2 = [[1127,305],[1113,291],[1095,283],[1084,294],[1088,310],[1097,319],[1116,327]];
		circles_lrt3 = [[1072,365],[1068,350],[1056,338],[1037,336],[1029,344],[1031,356],[1043,368],[1064,376]];
		circles_lrt4 = [[1161,373],[1166,387],[1179,400],[1200,394],[1201,378],[1188,365],[1171,362]];
		circles_lrt5 = [[1109,435],[1123,449],[1139,449],[1143,427],[1130,414]];

		//Stations locations on the JohoMaps map
		new_circles_red = [[978,793],[962,777],[946,733],[948,698],[928,681],[900,675],[875,661],[896,626],[925,590],[936,546],[931,512],[936,480],[942,403],[930,363],[876,226],[881,177],[817,110],[751,135],[696,148],[650,166],[598,196],[547,297],[535,348],[567,447],[561,483],[523,550]];
		new_circles_green = [[128,506],[132,553],[192,612],[227,586],[293,557],[355,531],[393,528],[445,510],[487,518],[523,550],[611,620],[651,635],[715,661],[740,676],[767,701],[810,721],[851,732],[898,751],[923,771],[952,732],[953,698],[967,666],[993,642],[1026,627],[1072,612],[1100,606],[1146,596],[1185,587],[1251,578],[1311,568],[1343,510],[1311,472],[1323,397]];
		new_circles_green2 = [[1375,547],[1427,491]];
		new_circles_yellow = [[962,777],[992,733],[993,690],[1001,673],[1037,667],[1071,656],[1091,648],[1100,606],[1096,576],[1085,545],[1055,512],[1028,487],[987,485],[936,480],[905,486],[901,528],[815,588],[786,606],[753,631],[715,661],[698,685],[682,718],[683,743],[711,762],[723,768],[740,775],[761,780],[838,812]];
		new_circles_yellow2 = [[950,678],[971,695]];
		new_circles_purple = [[838,812],[898,751],[916,727],[913,711],[928,681],[947,647],[967,617],[986,593],[1015,552],[1017,515],[1028,487],[1066,451],[1093,425],[1115,392],[1118,352],[1118,281]];
		new_circles_blue = [[916,727],[927,740],[948,761],[992,733],[995,690],[967,666],[958,657],[947,647],[896,626],[881,611],[862,602],[815,588],[775,575],[737,557],[672,532],[657,501],[626,426],[616,407],[605,363]];
		new_circles_lrt1 = [[546,351],[557,355],[570,360],[580,361],[605,363],[621,348],[633,348],[646,352],[652,363],[645,386],[630,380],[616,377]];
		new_circles_lrt11 = [[596,351]];
		new_circles_lrt2 = [[1121,272],[1125,264],[1126,255],[1118,254],[1112,260],[1108,266],[1103,275]];
		new_circles_lrt3 = [[1107,318],[1096,314],[1063,307],[1047,314],[1047,331],[1060,340],[1081,347],[1102,359]];
		new_circles_lrt4 = [[1131,291],[1146,298],[1166,308],[1177,307],[1177,292],[1155,280],[1134,275]];
		new_circles_lrt5 = [[1127,368],[1142,376],[1155,355],[1156,338],[1138,328]];

		//List of lines along with the color property
		all_paths = [
		["red", coordinates_red, transition_red, "#f00", circles_red, new_circles_red],
		["green", coordinates_green, transition_green, "82C728", circles_green, new_circles_green],
		["green2", coordinates_green2, transition_green2, "82C728", circles_green2, new_circles_green2],
		["yellow", coordinates_yellow, transition_yellow, "E79924", circles_yellow, new_circles_yellow],
		["yellow2", coordinates_yellow2, transition_yellow2, "E79924", circles_yellow2, new_circles_yellow2],
		["purple", coordinates_purple, transition_purple, "A313B0", circles_purple, new_circles_purple],
		["blue", coordinates_blue, transition_blue, "187BED", circles_blue, new_circles_blue],
		["lrt1", coordinates_lrt1, transition_lrt1, "666", circles_lrt1, new_circles_lrt1],
		["lrt11", coordinates_lrt11, transition_lrt11, "666", circles_lrt11, new_circles_lrt11],
		["lrt2", coordinates_lrt2, transition_lrt2, "666", circles_lrt2, new_circles_lrt2],
		["lrt3", coordinates_lrt3, transition_lrt3, "666", circles_lrt3, new_circles_lrt3],
		["lrt4", coordinates_lrt4, transition_lrt4, "666", circles_lrt4, new_circles_lrt4],
		["lrt5", coordinates_lrt5, transition_lrt5, "666", circles_lrt5, new_circles_lrt5],
		];

		//Show the MRT map and fade it out
		d3.select(".sg_bg").transition().delay(FADEOUT_DELAY).duration(FADEOUT_TIME).style("opacity","0");

		//Show all the lines and perform the transitions
		for (var j=0; j < all_paths.length; j++) {
			//Generate a line
			d3.select("body").append("svg").attr("class","coordinates_" + all_paths[j][0]).attr("width", 1680).attr("height", 1280).append("path").attr("d", all_paths[j][1]).style("fill", "none").style("stroke",all_paths[j][3]).style("stroke-width",STROKE_WIDTH);	
			
			//Generate a line's transition
			d3.select(".coordinates_" + all_paths[j][0] + " path").attr("d", all_paths[j][1]).call(transition, all_paths[j][2], all_paths[j][1]);
			
			for(var i=0; i < all_paths[j][4].length; i++) {
				//Generate stations
				d3.select("body").append("svg").attr("class","circle_" + all_paths[j][0] + "_" + String(i)).attr("width", 1680).attr("height", 1280).append("circle").attr("cx", all_paths[j][4][i][0]).attr("cy", all_paths[j][4][i][1]).attr("r", "4").style("fill",all_paths[j][3]);
				
				//Generate station transitions
				d3.select(".circle_" + all_paths[j][0] + "_" + String(i) + " circle").transition().ease("linear").delay(DELAY).duration(DURATION).attr("cx", all_paths[j][5][i][0]).attr("cy", all_paths[j][5][i][1]);
			}
		}

		//Fade in the background Google map
		d3.select(".sg_google").transition().delay(FADEIN_DELAY).duration(FADEIN_TIME).style("opacity","0.5");
	}

	</script>
	<style>
		body {
		  margin: 0px;
		}

		.sg_google {
			position: absolute;
			top: -67px;
			left: -62px;
			opacity: 0.5;
			z-index: -1;
			opacity: 0;
		}

		.sg_bg {
			position: absolute;
			top: 160px;
			left: 460px;
			z-index: 10000;
			opacity: 1;
		}

		svg {
			position: absolute;
		}
	</style>

<body onLoad=Start()>
	<img class="sg_google" src="sg_google.png" height="1027" />
	<img class="sg_bg" src="sg_bg.jpg" height="720"/>
</body>
</html>